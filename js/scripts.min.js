ymaps.ready(function(){var a=new ymaps.Map("ya-map",{center:[59.939346,30.329383],zoom:16,controls:[]},{suppressMapOpenBlock:!0},{searchControlProvider:"yandex#search"}),b=new ymaps.Placemark([59.938669,30.323057],{},{iconLayout:"default#image",iconImageHref:"img/map-marker.png",iconImageSize:[218,142],iconImageOffset:[-39,-139]});a.geoObjects.add(b),a.controls.remove("rulerControl"),a.controls.remove("searchControl"),a.controls.remove("trafficControl"),a.controls.remove("typeSelector"),a.controls.remove("zoomControl"),a.controls.remove("geolocationControl"),a.controls.remove("routeEditor")}),function(){function j(a){for(var b=a,c=[];null!=b.parentNode&&b.parentNode!=document.documentElement;)c.push(b.parentNode),b=b.parentNode;return c}var a=document.querySelector(".feedback-popup"),b=document.querySelector("#feedback-button"),c=a.querySelector(".feedback-popup-close"),d=a.querySelector(".feedback-form"),e=a.querySelector("#feedback-username"),f=a.querySelector("#feedback-email"),g=a.querySelector("#feedback-comment"),h=localStorage.getItem("feedback-username"),i=localStorage.getItem("feedback-email");window.onload=function(){g.setAttribute("value","")},b.addEventListener("click",function(b){b.preventDefault(),a.classList.add("feedback-popup-show"),d.classList.add("feedback-popup-bounce"),h&&i?(e.setAttribute("value",h),f.setAttribute("value",i),g.focus()):e.focus()}),c.addEventListener("click",function(b){b.preventDefault(),a.classList.remove("feedback-popup-show"),d.classList.remove("feedback-popup-bounce"),d.classList.remove("feedback-popup-error")}),d.addEventListener("submit",function(a){e.value&&f.value?(localStorage.setItem("feedback-username",e.value),localStorage.setItem("feedback-email",f.value)):(a.preventDefault(),d.classList.remove("feedback-popup-error"),d.offsetWidth=d.offsetWidth,d.classList.add("feedback-popup-error"))}),window.addEventListener("keydown",function(b){27===b.keyCode&&a.classList.contains("feedback-popup-show")&&(a.classList.remove("feedback-popup-show"),d.classList.remove("feedback-popup-bounce"),d.classList.remove("feedback-popup-error"))}),window.addEventListener("click",function(c){a.classList.contains("feedback-popup-show")&&!j(c.target).includes(d)&&c.target!==d&&c.target!==b&&(a.classList.remove("feedback-popup-show"),d.classList.remove("feedback-popup-bounce"),d.classList.remove("feedback-popup-error"))})}();
